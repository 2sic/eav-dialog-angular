<!-- !modes.freeTextMode && -->
<div *ngIf="enableCreate || chosenEntities.length > 0">

  <div *ngFor="let item of chosenEntities">
    <!-- <i title="" class="eav-icon-link pull-left eav-entityselect-icon" ng-show="!to.settings.Entity.AllowMultiValue"></i> -->
    <span [title]="getEntityText(item)">{{ getEntityText(item) }}</span>
    <!-- edit -->
    <button mat-icon-button *ngIf='enableEdit' type="button" (click)="editEntity(item)">
      <i class="material-icons">edit</i>
    </button>
    <!-- remove -->
    <button mat-icon-button *ngIf='enableRemove' type="button" (click)="removeEntity(item)">
      <i class="material-icons">{{allowMultiValue ? 'remove' : 'arrow_drop_down'}}</i>
    </button>
    <!-- delete -->
    <button mat-icon-button *ngIf='enableDelete' type="button" (click)="deleteEntity(item)">
      <i class="material-icons">delete</i>
    </button>
  </div>
</div>

<!-- pick existing entity -->
<!-- ng-if="!modes.freeTextMode" -->
<div *ngIf="enableAddExisting && (allowMultiValue || chosenEntities.length < 1)">
  <mat-form-field [style.width]="'100%'">
    <input matInput type="text" #autocompleteInput [id]="id" [placeholder]="config.label" [matAutocomplete]="auto">
  </mat-form-field>
  <mat-autocomplete #auto="matAutocomplete" (optionSelected)="optionSelected($event)">
    <mat-option *ngFor="let item of (selectEntities | async)" [value]="item.entity.guid" [disabled]="isInChosenEntities(item.entity.guid)">
      <span>{{item.entity.attributes['Name'] ? item.entity.attributes['Name'].values[0].value : item.entity.guid}} {{value}}</span>
    </mat-option>
  </mat-autocomplete>
  <!--  <ui-select-no-choice class="bg-warning">
        <span ng-if="!error">{{ 'FieldType.EntityQuery.QueryNoItems' | translate }}</span>
        <span ng-if="error">{{error}}</span>
      </ui-select-no-choice>
    </ui-select> -->
</div>