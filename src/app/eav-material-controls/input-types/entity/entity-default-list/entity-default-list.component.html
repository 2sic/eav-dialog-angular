<div *ngIf="!freeTextMode && (enableCreate || (chosenEntities && chosenEntities.length > 0))">
  <div class="dnd-placeholder" #placeholder>
  </div>
  <div [dndList]="dndListConfig" [dndPlaceholder]="placeholder" [dndModel]="chosenEntities">
    <div *ngFor="let item of chosenEntities; let i = index" [dndType]="item.type" [dndDraggable] [dndObject]="item"
      (dndMoved)="removeItem(item, chosenEntities)">
      <div [ngClass]="{
        'dnd-element-multi' : allowMultiValue,
        'mat-elevation-z2' : allowMultiValue,
        'dnd-element': !allowMultiValue,
        'dnd-element--disabled': disabled,
        'first': i === 0
        }" fxLayout="row" fxLayoutAlign="start center">
        <!-- Single element -->
        <div *ngIf="!allowMultiValue" class="dnd-element-content" dndNoDrag>
          <div *ngIf="i === 0">
            <mat-label class="mat-caption">{{config.field.label}}
              {{config.field.required ? '*': '' }}</mat-label>
          </div>
          <div>
            <span class="dnd-element-text"
              [title]="getEntityText(item.name) + ' (' + item.name + ')'">{{getEntityText(item.name)}}</span>
          </div>
        </div>
        <!-- Multiple elements dragging disabled -->
        <div *ngIf="allowMultiValue && disabled" class="dnd-element-content" dndNoDrag>
          <div fxLayout="row" fxLayoutAlign="start center">
            <mat-icon>more_vert</mat-icon>
            <span>&nbsp;&nbsp;</span>
            <span class="dnd-element-text"
              [title]="getEntityText(item.name) + ' (' + item.name + ')'">{{getEntityText(item.name)}}</span>
          </div>
        </div>
        <!-- Multiple elements dragging enabled -->
        <div *ngIf="allowMultiValue && !disabled" class="dnd-element-content cursor-move">
          <div fxLayout="row" fxLayoutAlign="start center">
            <mat-icon matTooltip="{{ 'Fields.Entity.DragMove' | translate }}">more_vert</mat-icon>
            <span>&nbsp;&nbsp;</span>
            <span class="dnd-element-text"
              [title]="getEntityText(item.name) + ' (' + item.name + ')'">{{getEntityText(item.name)}}</span>
          </div>
        </div>
        <!-- dndHandle specific handle elements (drag)-->
        <!-- Action buttons -->
        <div class="dnd-buttons" fxLayoutAlign="end center">
          <!-- disable edit only if it was disabled in the settings, not if disabled by language change -->
          <button dndNoDrag mat-icon-button *ngIf="enableEdit && !isFreeTextOrNotFound(item.name)" type="button"
            class="dndButtons" (click)="edit(item.name)" title="{{ 'Fields.Entity.Edit' | translate }}"
            [disabled]="config.field.disabled">
            <mat-icon>edit</mat-icon>
          </button>
          <button dndNoDrag mat-icon-button *ngIf="enableDelete && !isFreeTextOrNotFound(item.name)" type="button"
            class="dndButtons" (click)="deleteItemInSlot(item.name, i)" title="{{ 'Fields.Entity.Delete' | translate }}"
            [disabled]="disabled">
            <mat-icon>delete_outline</mat-icon>
          </button>
          <button dndNoDrag mat-icon-button *ngIf="enableRemove" type="button" class="dndButtons"
            (click)="removeSlot(item.name, i)" title="{{ 'Fields.Entity.Remove' | translate }}" [disabled]="disabled">
            <mat-icon>{{allowMultiValue ? 'clear' : 'arrow_drop_down'}}</mat-icon>
          </button>
        </div>
      </div>
    </div>
  </div>
  <div *ngIf="allowMultiValue" class="dnd-space"></div>
</div>
