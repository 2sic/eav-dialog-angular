<mat-card class="example-card" *ngIf="(items$ | async) && (items$ | async).length">
  <button mat-icon-button (click)="close()" class="button-top-right">
    <mat-icon class="mat-24">close</mat-icon>
  </button>

  <app-eav-language-switcher *ngIf="(languages$ | async).length > 0" [languages]="(languages$ | async)" [currentLanguage]="(currentLanguage$ | async)"></app-eav-language-switcher>

  <mat-error *ngIf="!formsAreValid">
    <span *ngFor="let formError of formErrors;">
      <p *ngFor="let key of Object.keys(formError)">{{key}}: {{ formError[key] | translate}}</p>
    </span>
  </mat-error>

  <div *ngFor="let item of (items$ | async); trackBy:trackByFn">
    <app-item-edit-form [item]="item" [currentLanguage]="(currentLanguage$ | async)" [defaultLanguage]="(defaultLanguage$ | async)"
      (itemFormValueChange)="formValueChange($event)"></app-item-edit-form>
  </div>
  <button mat-raised-button type="submit" class="btn btn-default submit-button" [ngClass]="{ 'disabled': !formsAreValid }"
    (click)="saveAll(true)">{{ 'Button.Save' | translate}}</button>
  <button mat-icon-button type="button" [matMenuTriggerFor]="saveMenu" [ngClass]="{ 'disabled': !formsAreValid }">
    <i class="eav-icon-down-dir"></i>
  </button>
  <mat-menu #saveMenu="matMenu" [overlapTrigger]="false">
    <button mat-menu-item type="button" (click)="saveAll(true)">{{ 'Button.Save' | translate}}</button>
    <button mat-menu-item type="button" (click)="saveAll(false)">{{ 'Button.SaveAndKeepOpen' | translate}}</button>
  </mat-menu>
  <button mat-icon-button type="button" [matMenuTriggerFor]="publishModeMenu" [ngClass]="{ 'disabled': !formsAreValid }">
    <i [ngClass]="{'eav-icon-eye': publishMode === 'show', 'eav-icon-eye-close': publishMode === 'hide', 'eav-icon-git-branch': publishMode === 'branch'}"></i> {{ 'SaveMode.' + publishMode | translate }}
    <i class="eav-icon-down-dir"></i>
  </button>

  <mat-menu #publishModeMenu="matMenu" [overlapTrigger]="false">
    <button *ngIf="eavConfig.versioningOptions.show" mat-menu-item type="button" (click)="publishMode = 'show'">
      <i class="eav-icon-eye"></i>{{ 'SaveMode.show' | translate }}</button>
    <button *ngIf="eavConfig.versioningOptions.hide" mat-menu-item type="button" (click)="publishMode = 'hide'">
      <i class="eav-icon-eye-close"></i>{{ 'SaveMode.hide' | translate }}</button>
    <button *ngIf="eavConfig.versioningOptions.branch" mat-menu-item type="button" (click)="publishMode = 'branch'">
      <i class="eav-icon-git-branch"></i>{{ 'SaveMode.branch' |translate }}</button>
  </mat-menu>
</mat-card>