<div class="fabs-box">
  <button mat-mini-fab color="accent" [matTooltip]="'Fields.Hyperlink.Default.AdamTip' | translate"
    *ngIf="buttons.includes('adam')" [disabled]="control.disabled" (click)="toggleAdam()">
    <mat-icon svgIcon="appleFilled"></mat-icon>
  </button>
  <button mat-mini-fab color="primary" [matTooltip]="'Fields.Hyperlink.Default.PageTip' | translate"
    *ngIf="buttons.includes('page')" [disabled]="control.disabled" (click)="openPageDialog()">
    <mat-icon svgIcon="sitemap"></mat-icon>
  </button>
  <button mat-mini-fab color="primary" [matTooltip]="'Fields.Hyperlink.Default.MoreOptions' | translate"
    *ngIf="buttons.includes('more')" [disabled]="control.disabled" [matMenuTriggerFor]="menu">
    <mat-icon>more_vert</mat-icon>
  </button>
</div>

<mat-menu #menu="matMenu" class="menu-box">
  <button mat-menu-item *ngIf="showAdam" (click)="toggleAdam(false)">
    <mat-icon svgIcon="appleFilled"></mat-icon>
    <span>{{ 'Fields.Hyperlink.Default.MenuAdam' | translate }}</span>
  </button>
  <button mat-menu-item *ngIf="config.field.settings.ShowPagePicker" (click)="openPageDialog()">
    <mat-icon svgIcon="sitemap"></mat-icon>
    <span>{{ 'Fields.Hyperlink.Default.MenuPage' | translate }}</span>
  </button>
  <button mat-menu-item *ngIf="config.field.settings.ShowImageManager" (click)="toggleAdam(true, true)">
    <mat-icon svgIcon="file-image"></mat-icon>
    <span>{{ 'Fields.Hyperlink.Default.MenuImage' | translate }}</span>
  </button>
  <button mat-menu-item *ngIf="config.field.settings.ShowFileManager" (click)="toggleAdam(true, false)">
    <mat-icon svgIcon="file"></mat-icon>
    <span>{{ 'Fields.Hyperlink.Default.MenuDocs' | translate }}</span>
  </button>
</mat-menu>

<!-- content -->
<div class="mdc-layout-grid">
  <div class="mdc-layout-grid__inner">
    <mat-card class="mdc-layout-grid__cell--span-12 hyperlink-card shadow-bottom-z-1">
      <div class="hyperlink-input-link-wrapper">
        <!-- input -->
        <mat-form-field [formGroup]="group" appearance="standard" color="accent">
          <input matInput type="text" [formControlName]="config.field.name"
            [matTooltip]="'Fields.Hyperlink.Default.Tooltip' | translate" matTooltipPosition="above"
            [placeholder]="config.field.label" [required]="config.field.required" appPasteClipboardImage
            [config]="config" [elementType]="'input'">
          <mat-label>{{ config.field.label }}</mat-label>
        </mat-form-field>
        <!-- link absolutely positioned above input -->
        <div *ngIf="showInputFileName" class="hyperlink-floating">
          <div class="hyperlink-floating__value">{{ control.value }}</div>
          <div class="hyperlink-floating__url-box">
            <a [href]="link" target="_blank" tabindex="-1" class="hyperlink-floating__url" [matTooltip]="link">
              <span>.../{{ link.substr(link.lastIndexOf("/") + 1, link.length) }}</span>
            </a>
          </div>
        </div>
      </div>
      <div class="preview-wrapper">
        <!-- image -->
        <a [href]="thumbnailUrl()" target="_blank" *ngIf="control.value && isImage()">
          <div class="preview-image-box">
            <img [src]="thumbnailUrl(2)" class="preview-image" />
          </div>
        </a>
        <!-- icon -->
        <a [href]="link" target="_blank" [matTooltip]="tooltipUrl(link)" matTooltipPosition="right"
          *ngIf="control.value && !isImage()">
          <div class="preview-icon-box">
            <mat-icon *ngIf="isKnownType()">{{ icon() }}</mat-icon>
            <mat-icon *ngIf="!isKnownType()" [svgIcon]="icon()"></mat-icon>
          </div>
        </a>
      </div>
    </mat-card>
  </div>
</div>
