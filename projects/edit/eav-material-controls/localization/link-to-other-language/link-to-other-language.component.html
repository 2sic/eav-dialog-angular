<mat-card class="link-other-lang-container u-hide-scrollbar" *ngIf="{
  languages: languages$ | async,
  selected: selected$ | async,
  showLanguages: showLanguages$ | async,
  i18nRoot: i18nRoot$ | async
} as data">
  <div class="mat-card__header">
    <div class="mat-card__title">
      {{ 'LangMenu.Dialog.Title' | translate: { name: dialogData.attributeKey } }}
    </div>
    <div class="mat-card__description">
      {{ 'LangMenu.Dialog.Intro' | translate }}
    </div>
  </div>

  <mat-nav-list toggle>
    <ng-container
      *ngTemplateOutlet="item;context:{ link: TranslationLinks.DontTranslate, icon: 'lock', i18nKey: I18nKeys.NoTranslate }">
    </ng-container>
    <ng-container
      *ngTemplateOutlet="item;context:{ link: TranslationLinks.Translate, icon: 'lock_open', i18nKey: I18nKeys.FromPrimary }">
    </ng-container>
    <ng-container
      *ngTemplateOutlet="item;context:{ link: TranslationLinks.LinkCopyFrom, icon: 'translate', i18nKey: I18nKeys.FromOther }">
    </ng-container>
    <ng-container
      *ngTemplateOutlet="item;context:{ link: TranslationLinks.LinkReadOnly, icon: 'link', i18nKey: I18nKeys.LinkReadOnly }">
    </ng-container>
    <ng-container
      *ngTemplateOutlet="item;context:{ link: TranslationLinks.LinkReadWrite, icon: 'share', i18nKey: I18nKeys.LinkShared }">
    </ng-container>
  </mat-nav-list>

  <ng-template #item let-icon="icon" let-link='link' let-i18nKey="i18nKey">
    <mat-list-item [ngClass]="{ 'mat-list-item-focus': data.selected.linkType === link }" (click)="select(i18nKey)">

      <mat-icon matListIcon color="accent">{{ icon }}</mat-icon>
      <div matLine class="mat-list-item__title">
        {{ ('LangMenu.Dialog.' + i18nKey + '.Title') | translate : { primary: dialogData.defaultLanguage } }}</div>
      <div matLine class="mat-list-item__body">
        {{ ('LangMenu.Dialog.' + i18nKey + '.Body') | translate : { primary: dialogData.defaultLanguage } }}</div>
    </mat-list-item>
  </ng-template>

  <div *ngIf="data.showLanguages">
    <div class="mat-card__header">
      <div class="mat-card__title">
        {{ (data.i18nRoot + '.Subtitle') | translate }}
      </div>
      <div class="mat-card__description">
        {{'LangMenu.Dialog.PickLanguageIntro' | translate }}
      </div>
    </div>

    <mat-action-list>
      <button mat-list-item *ngFor="let language of data.languages" (click)="selectLanguage(language.key)"
        [disabled]="isLanguageDisabled(language.key)" [ngClass]="{
        'mat-list-item-focus': data.selected.language === language.key,
        'mat-list-item--disabled': isLanguageDisabled(language.key)
      }">
        <mat-icon matListIcon color="accent">language</mat-icon>
        {{ language.key }}
      </button>
    </mat-action-list>
  </div>

  <mat-dialog-actions fxLayoutAlign="end center">
    <button mat-button color="accent" [disabled]="isOkDisabled(data.selected)"
      [mat-dialog-close]="data.selected">OK</button>
  </mat-dialog-actions>
</mat-card>
